(self.webpackChunkmoodly=self.webpackChunkmoodly||[]).push([[889],{1107:function(y,P,t){var n=t(84856),i=t(52593),c=i(n);y.exports=c},92403:function(y,P,t){var n=t(1107),i=t(47727);function c(g,p){var l=-1,d=i(g)?Array(g.length):[];return n(g,function(u,D,O){d[++l]=p(u,D,O)}),d}y.exports=c},16429:function(y,P,t){var n=t(36393),i=t(82393),c=t(90040),g=t(92403),p=t(63135),l=t(20435),d=t(9998),u=t(51339),D=t(26126);function O(v,x,M){x.length?x=n(x,function(L){return D(L)?function(T){return i(T,L.length===1?L[0]:L)}:L}):x=[u];var K=-1;x=n(x,l(c));var R=g(v,function(L,T,W){var Z=n(x,function(N){return N(L)});return{criteria:Z,index:++K,value:L}});return p(R,function(L,T){return d(L,T,M)})}y.exports=O},63135:function(y){function P(t,n){var i=t.length;for(t.sort(n);i--;)t[i]=t[i].value;return t}y.exports=P},17654:function(y,P,t){var n=t(85194);function i(c,g){if(c!==g){var p=c!==void 0,l=c===null,d=c===c,u=n(c),D=g!==void 0,O=g===null,v=g===g,x=n(g);if(!O&&!x&&!u&&c>g||u&&D&&v&&!O&&!x||l&&D&&v||!p&&v||!d)return 1;if(!l&&!u&&!x&&c<g||x&&p&&d&&!l&&!u||O&&p&&d||!D&&d||!v)return-1}return 0}y.exports=i},9998:function(y,P,t){var n=t(17654);function i(c,g,p){for(var l=-1,d=c.criteria,u=g.criteria,D=d.length,O=p.length;++l<D;){var v=n(d[l],u[l]);if(v){if(l>=O)return v;var x=p[l];return v*(x=="desc"?-1:1)}}return c.index-g.index}y.exports=i},52593:function(y,P,t){var n=t(47727);function i(c,g){return function(p,l){if(p==null)return p;if(!n(p))return c(p,l);for(var d=p.length,u=g?d:-1,D=Object(p);(g?u--:++u<d)&&l(D[u],u,D)!==!1;);return p}}y.exports=i},8243:function(y,P,t){var n=t(93367),i=t(16429),c=t(52431),g=t(65145),p=c(function(l,d){if(l==null)return[];var u=d.length;return u>1&&g(l,d[0],d[1])?d=[]:u>2&&g(d[0],d[1],d[2])&&(d=[d[0]]),i(l,n(d,1),[])});y.exports=p},50889:function(y,P,t){"use strict";t.r(P),t.d(P,{SettingsPage:function(){return xn}});var n=t(74081),i=t(27279),c=t(50703),g=t(5938),p=t(6918),l=t(32370),d=t(77804),u=t(93415),D=t(1821),O=t(10701),v=t(48102),x=t(55911),M=t(35250),K=t(12881),R=t(69878),L=t(94098),T=t(84366),W=t(61908),Z=t(98410),N=t(1597),X=t(77011),k=t(67909),ot=t(9902),Q=t(83375),et=t(94485),Y=t(78406),it=t(97767),at=t(4987),mt=t(93841),b=t(23298),H=t(74577),gt=t(27997),pt=t(73354),ht=t(77970),Et=t(27875),V=t(74758),Ct=t(68412),I=t(87006),Zt=t(364),_=t(61020),rt=t(51447),Ft=t(47533),J=t(30594),$t=t(8243),jt=t(59461),yt=t(12847),_t=t(71877),Nt=t(17912),Gt=t(96220),Ht=t(20534),Vt=t(49370),Qt=t(91561),Jt=t(80153),Xt=t(36938),Yt=t(84352),bt=t(59082),Rt=t(48157),e=t(70627),Tt=t(72450),At=t(40464),xt=t(61815),wt=t(87830),Mn=t(15816),fn=t(97442),On=t(13576),Pn=t(47184),vn=t(71563),Dn=t(49204),Ln=t(47853),Cn=t(75719),jn=t(74919),yn=t(29206),Rn=t(98934),Tn=t(43433),An=t(64797),Bn=t(85811),Un=t(8175);const kt=o=>o.map(s=>{const r=s.links.map(a=>({...a,isDisplayed:!1}));return{...s,links:r}}),qt=()=>{const[{isLoading:o,menu:s},r]=i.useState({isLoading:!0,menu:[]}),{allPermissions:a}=(0,I.vn)(),{shouldUpdateStrapi:h}=(0,I.L7)(),{settings:C}=(0,I.j1)(),A=(0,jt.v9)(yt.s),j=i.useMemo(()=>(0,J.Q)(),[]),{admin:E,global:m}=(0,J.p)(j,async()=>(await t.e(5146).then(t.bind(t,75146))).SETTINGS_LINKS_EE(),{combine(f,S){return{admin:[...S.admin,...f.admin],global:[...f.global,...S.global]}},defaultValue:{admin:[],global:[]}}),U=i.useCallback(f=>{if(!f.id)throw new Error("The settings menu item must have an id attribute.");return{...f,permissions:A.settings?.[f.id]?.main??[]}},[A.settings]);return i.useEffect(()=>{const f=async()=>{const G=await(tt=>Promise.all(tt.reduce((nt,dt,ct)=>{const B=dt.links.map(async(st,w)=>({hasPermission:await(0,I.qX)(a,st.permissions),sectionIndex:ct,linkIndex:w}));return[...nt,...B]},[])))($);r(tt=>({...tt,isLoading:!1,menu:$.map((nt,dt)=>({...nt,links:nt.links.map((ct,B)=>{const st=G.find(w=>w.sectionIndex===dt&&w.linkIndex===B);return{...ct,isDisplayed:Boolean(st?.hasPermission)}})}))}))},{global:S,...F}=C,$=kt([{...S,links:$t([...S.links,...m.map(U)],z=>z.id).map(z=>({...z,hasNotification:z.id==="000-application-infos"&&h}))},{id:"permissions",intlLabel:{id:"Settings.permissions",defaultMessage:"Administration Panel"},links:E.map(U)},...Object.values(F)]);f()},[E,m,a,C,h,U]),{isLoading:o,menu:s.map(f=>({...f,links:f.links.filter(S=>S.isDisplayed)}))}},tn=(0,Tt.ZP)(c.J)`
  right: 15px;
  position: absolute;
`,Bt=({menu:o})=>{const{formatMessage:s}=(0,_.Z)(),{trackUsage:r}=(0,I.rS)(),{pathname:a}=(0,rt.TH)(),C=o.filter(E=>!E.links.every(m=>m.isDisplayed===!1)).map(E=>({...E,title:E.intlLabel,links:E.links.map(m=>({...m,title:m.intlLabel,name:m.id}))})),A=s({id:"global.settings",defaultMessage:"Settings"}),j=(E=null)=>{r("willNavigate",{from:a,to:E})};return(0,n.jsxs)(_t.m,{ariaLabel:A,children:[(0,n.jsx)(Nt.p,{label:A}),(0,n.jsx)(Gt.Z,{children:C.map(E=>(0,n.jsx)(Ht.D,{label:s(E.intlLabel),children:E.links.map(m=>(0,n.jsxs)(Vt.E,{as:Ft.OL,withBullet:m.hasNotification,to:m.to,onClick:()=>j(m.to),children:[s(m.intlLabel),m?.lockIcon&&(0,n.jsx)(tn,{width:`${15/16}rem`,height:`${15/16}rem`,as:Qt.Z})]},m.id))},E.id))})]})};Bt.propTypes={menu:e.array.isRequired};const nn=[{async Component(){return await t.e(3420).then(t.bind(t,43420))},to:"/settings/roles",exact:!0},{async Component(){return await Promise.all([t.e(3599),t.e(8902),t.e(3352)]).then(t.bind(t,13352))},to:"/settings/roles/duplicate/:id",exact:!0},{async Component(){return await Promise.all([t.e(3599),t.e(8902),t.e(3352)]).then(t.bind(t,13352))},to:"/settings/roles/new",exact:!0},{async Component(){return await Promise.all([t.e(8902),t.e(174)]).then(t.bind(t,45729))},to:"/settings/roles/:id",exact:!0},{async Component(){return await t.e(8075).then(t.bind(t,48075)).then(s=>s.i)},to:"/settings/users",exact:!0},{async Component(){return await t.e(9749).then(t.bind(t,69749))},to:"/settings/users/:id",exact:!0},{async Component(){return await Promise.all([t.e(1920),t.e(2345)]).then(t.bind(t,62345))},to:"/settings/webhooks/create",exact:!0},{async Component(){return await Promise.all([t.e(1920),t.e(2822)]).then(t.bind(t,82822))},to:"/settings/webhooks/:id",exact:!0},{async Component(){return await t.e(5290).then(t.bind(t,5290))},to:"/settings/webhooks",exact:!0},{async Component(){return await t.e(7519).then(t.bind(t,97519))},to:"/settings/api-tokens",exact:!0},{async Component(){return await Promise.all([t.e(3599),t.e(6094),t.e(5476),t.e(6975)]).then(t.bind(t,56975))},to:"/settings/api-tokens/create",exact:!0},{async Component(){return await Promise.all([t.e(3599),t.e(6094),t.e(5476),t.e(2940)]).then(t.bind(t,2940))},to:"/settings/api-tokens/:id",exact:!0},{async Component(){return await Promise.all([t.e(3599),t.e(6094),t.e(1813)]).then(t.bind(t,81813))},to:"/settings/transfer-tokens/create",exact:!0},{async Component(){return await t.e(5574).then(t.bind(t,75574))},to:"/settings/transfer-tokens",exact:!0},{async Component(){return await Promise.all([t.e(3599),t.e(6094),t.e(5084)]).then(t.bind(t,15084))},to:"/settings/transfer-tokens/:id",exact:!0},{async Component(){return await t.e(816).then(t.bind(t,816))},to:"/settings/purchase-audit-logs",exact:!0},{async Component(){return await t.e(3674).then(t.bind(t,33674))},to:"/settings/purchase-review-workflows",exact:!0},{async Component(){return await t.e(4456).then(t.bind(t,84456))},to:"/settings/purchase-single-sign-on",exact:!0}],q=750,lt=100,Ut=["image/jpeg","image/png","image/svg+xml"],It={localImage:void 0},sn=(o=It,s)=>(0,xt.ZP)(o,r=>{switch(s.type){case"SET_LOCAL_IMAGE":{r.localImage=s.value;break}default:return r}}),Mt=({onChangeLogo:o,customLogo:s,goTo:r,Component:a,modalTitle:h,next:C,prev:A,currentStep:j})=>{const[{localImage:E},m]=(0,i.useReducer)(sn,It),{formatMessage:U}=(0,_.Z)(),f=F=>{m({type:"SET_LOCAL_IMAGE",value:F})},S=()=>{r(null)};return j?(0,n.jsxs)(g.P,{labelledBy:"modal",onClose:S,children:[(0,n.jsx)(p.x,{children:(0,n.jsx)(l.Z,{fontWeight:"bold",as:"h2",id:"modal",children:U(h)})}),(0,n.jsx)(a,{setLocalImage:f,goTo:r,next:C,prev:A,onClose:S,asset:E||s,onChangeLogo:o})]}):null};Mt.defaultProps={Component:void 0,currentStep:void 0,customLogo:void 0,modalTitle:void 0,next:null,prev:null},Mt.propTypes={Component:e.elementType,currentStep:e.string,customLogo:e.shape({name:e.string,url:e.string,width:e.number,height:e.number,ext:e.string}),goTo:e.func.isRequired,modalTitle:e.shape({id:e.string,defaultMessage:e.string}),next:e.string,onChangeLogo:e.func.isRequired,prev:e.string};const St={currentStep:void 0},on=(o=St,s)=>(0,xt.ZP)(o,r=>{switch(s.type){case"GO_TO":{r.currentStep=s.to;break}default:return r}}),en={id:"Settings.application.customization.modal.upload.error-format",defaultMessage:"Wrong format uploaded (accepted formats only: jpeg, jpg, png, svg)."},Wt={id:"Settings.application.customization.modal.upload.error-size",defaultMessage:"The file uploaded is too large (max dimension: {dimension}x{dimension}, max file size: {size}KB)"},an=o=>new Promise(s=>{const r=new FileReader;r.onload=()=>{const a=new Image;a.onload=function(){s({width:a.width,height:a.height})},a.src=r.result},r.readAsDataURL(o)}),rn=(o,s)=>({ext:o.name.split(".").pop(),size:o.size/1e3,name:o.name,url:URL.createObjectURL(o),rawFile:o,width:s.width,height:s.height}),Kt=async o=>{let s;if(!Ut.includes(o.type))throw s=new Error("File format"),s.displayMessage=en,s;const a=await an(o);if(!(a.width<=q&&a.height<=q))throw s=new Error("File sizing"),s.displayMessage=Wt,s;const C=rn(o,a);if(!(C.size<=lt))throw s=new Error("File sizing"),s.displayMessage=Wt,s;return C},ln=(0,Tt.ZP)(d._)`
  opacity: 0;
  position: absolute;
  top: 0;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 1;
`,ft=({setLocalImage:o,goTo:s,next:r,onClose:a})=>{const{formatMessage:h}=(0,_.Z)(),[C,A]=(0,i.useState)(!1),[j,E]=(0,i.useState)(void 0),m=(0,i.useRef)(null),U=()=>A(!0),f=()=>A(!1),S=z=>{z.preventDefault(),m.current.click()},F=async()=>{f();const z=m.current.files[0];if(z)try{const G=await Kt(z);o(G),s(r)}catch(G){if(G.displayMessage)E(h(G.displayMessage,{size:lt,dimension:q})),m.current.focus();else throw G}},$=()=>C?"primary500":j?"danger600":"neutral300";return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)("form",{children:(0,n.jsx)(u.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6,children:(0,n.jsx)(D.g,{name:"logo-upload",error:j,children:(0,n.jsx)("label",{htmlFor:"logo-upload",children:(0,n.jsxs)(O.k,{direction:"column",alignItems:"stretch",gap:2,children:[(0,n.jsxs)(O.k,{paddingTop:9,paddingBottom:7,hasRadius:!0,justifyContent:"center",direction:"column",background:C?"primary100":"neutral100",borderColor:$(),borderStyle:"dashed",borderWidth:"1px",position:"relative",onDragEnter:U,onDragLeave:f,children:[(0,n.jsx)(c.J,{color:"primary600",width:`${60/16}rem`,height:`${60/16}rem`,as:Jt.Z,"aria-hidden":!0}),(0,n.jsx)(u.x,{paddingTop:3,paddingBottom:5,children:(0,n.jsx)(l.Z,{variant:"delta",as:"span",children:h({id:"Settings.application.customization.modal.upload.drag-drop",defaultMessage:"Drag and Drop here or"})})}),(0,n.jsx)(ln,{accept:Ut,cursor:"pointer",as:"input",type:"file",name:"files",tabIndex:-1,zIndex:1,onChange:F,ref:m,id:"logo-upload"}),(0,n.jsx)(v.z,{type:"button",onClick:S,children:h({id:"Settings.application.customization.modal.upload.cta.browse",defaultMessage:"Browse files"})}),(0,n.jsx)(u.x,{paddingTop:6,children:(0,n.jsx)(l.Z,{variant:"pi",textColor:"neutral600",children:h({id:"Settings.application.customization.modal.upload.file-validation",defaultMessage:"Max dimension: {dimension}x{dimension}, Max size: {size}KB"},{size:lt,dimension:q})})})]}),(0,n.jsx)(x.c,{})]})})})})}),(0,n.jsx)(M.m,{startActions:(0,n.jsx)(v.z,{onClick:a,variant:"tertiary",children:h({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"})})})]})};ft.defaultProps={next:null},ft.propTypes={goTo:e.func.isRequired,next:e.string,onClose:e.func.isRequired,setLocalImage:e.func.isRequired};const dn=async o=>{try{const{get:s}=(0,I.tg)(),r=await s(o,{responseType:"blob",timeout:8e3});return new File([r.data],r.config.url,{type:r.headers["content-type"]})}catch(s){throw s.displayMessage={id:"Settings.application.customization.modal.upload.error-network",defaultMessage:"Network error"},s}},Ot=({goTo:o,next:s,onClose:r,setLocalImage:a})=>{const{formatMessage:h}=(0,_.Z)(),[C,A]=(0,i.useState)(""),[j,E]=(0,i.useState)(null),m=f=>{A(f.target.value)},U=async()=>{try{const f=await dn(C),S=await Kt(f);a(S),o(s)}catch(f){if(f.displayMessage)E(h(f.displayMessage,{size:lt,dimension:q}));else throw f}};return(0,n.jsxs)("form",{onSubmit:f=>{f.preventDefault(),U()},children:[(0,n.jsx)(u.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6,children:(0,n.jsx)(K.o,{label:h({id:"Settings.application.customization.modal.upload.from-url.input-label",defaultMessage:"URL"}),error:j,onChange:m,value:C,name:"logo-url"})}),(0,n.jsx)(M.m,{startActions:(0,n.jsx)(v.z,{onClick:r,variant:"tertiary",children:h({id:"app.components.Button.cancel",defaultMessage:"Cancel"})}),endActions:(0,n.jsx)(v.z,{type:"submit",children:h({id:"Settings.application.customization.modal.upload.next",defaultMessage:"Next"})})})]})};Ot.defaultProps={next:null},Ot.propTypes={goTo:e.func.isRequired,next:e.string,onClose:e.func.isRequired,setLocalImage:e.func.isRequired};const Pt=({setLocalImage:o,goTo:s,next:r,onClose:a})=>{const{formatMessage:h}=(0,_.Z)();return(0,n.jsxs)(R.v,{label:h({id:"Settings.application.customization.modal.tab.label",defaultMessage:"How do you want to upload your assets?"}),variant:"simple",children:[(0,n.jsxs)(u.x,{paddingLeft:8,paddingRight:8,children:[(0,n.jsxs)(L.m,{children:[(0,n.jsx)(L.O,{children:h({id:"Settings.application.customization.modal.upload.from-computer",defaultMessage:"From computer"})}),(0,n.jsx)(L.O,{children:h({id:"Settings.application.customization.modal.upload.from-url",defaultMessage:"From url"})})]}),(0,n.jsx)(T.i,{})]}),(0,n.jsxs)(W.n,{children:[(0,n.jsx)(W.x,{children:(0,n.jsx)(ft,{onClose:a,setLocalImage:o,goTo:s,next:r})}),(0,n.jsx)(W.x,{children:(0,n.jsx)(Ot,{onClose:a,setLocalImage:o,goTo:s,next:r})})]})]})};Pt.defaultProps={next:null},Pt.propTypes={goTo:e.func.isRequired,next:e.string,onClose:e.func.isRequired,setLocalImage:e.func.isRequired};const zt=({asset:o})=>{const{formatMessage:s}=(0,_.Z)();return(0,n.jsxs)(Z.Z,{children:[(0,n.jsx)(N.O,{children:(0,n.jsx)(X.H,{size:"S",src:o.url})}),(0,n.jsxs)(k.e,{children:[(0,n.jsxs)(ot.a,{children:[(0,n.jsx)(Q.l,{children:o.name}),(0,n.jsx)(Q._,{children:`${o.ext.toUpperCase()} - ${o.width}\u2715${o.height}`})]}),(0,n.jsx)(et.E,{children:s({id:"Settings.application.customization.modal.pending.card-badge",defaultMessage:"image"})})]})]})};zt.propTypes={asset:e.shape({name:e.string,url:e.string,width:e.number,height:e.number,ext:e.string}).isRequired};const vt=({onClose:o,asset:s,prev:r,next:a,goTo:h,setLocalImage:C,onChangeLogo:A})=>{const{formatMessage:j}=(0,_.Z)(),E=()=>{C(void 0),h(r)},m=()=>{A(s),h(a)};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(u.x,{paddingLeft:8,paddingRight:8,paddingTop:6,paddingBottom:6,children:[(0,n.jsxs)(O.k,{justifyContent:"space-between",paddingBottom:6,children:[(0,n.jsxs)(O.k,{direction:"column",alignItems:"flex-start",children:[(0,n.jsx)(l.Z,{variant:"pi",fontWeight:"bold",children:j({id:"Settings.application.customization.modal.pending.title",defaultMessage:"Logo ready to upload"})}),(0,n.jsx)(l.Z,{variant:"pi",textColor:"neutral500",children:j({id:"Settings.application.customization.modal.pending.subtitle",defaultMessage:"Manage the chosen logo before uploading it"})})]}),(0,n.jsx)(v.z,{onClick:E,variant:"secondary",children:j({id:"Settings.application.customization.modal.pending.choose-another",defaultMessage:"Choose another logo"})})]}),(0,n.jsx)(u.x,{maxWidth:(0,I.Q1)(180),children:s.url?(0,n.jsx)(zt,{asset:s}):null})]}),(0,n.jsx)(M.m,{startActions:(0,n.jsx)(v.z,{onClick:o,variant:"tertiary",children:j({id:"Settings.application.customization.modal.cancel",defaultMessage:"Cancel"})}),endActions:(0,n.jsx)(v.z,{onClick:m,children:j({id:"Settings.application.customization.modal.pending.upload",defaultMessage:"Upload logo"})})})]})};vt.defaultProps={next:null,prev:null},vt.propTypes={goTo:e.func.isRequired,asset:e.shape({name:e.string,url:e.string,width:e.number,height:e.number,ext:e.string}).isRequired,next:e.string,onClose:e.func.isRequired,onChangeLogo:e.func.isRequired,prev:e.string,setLocalImage:e.func.isRequired};const cn={upload:{Component:Pt,modalTitle:{id:"Settings.application.customization.modal.upload",defaultMessage:"Upload logo"},next:"pending",prev:null},pending:{Component:vt,modalTitle:{id:"Settings.application.customization.modal.pending",defaultMessage:"Pending logo"},next:null,prev:"upload"}},ut=({canUpdate:o,customLogo:s,defaultLogo:r,hint:a,label:h,onChangeLogo:C,onResetLogo:A})=>{const[{currentStep:j},E]=(0,i.useReducer)(on,St),{Component:m,next:U,prev:f,modalTitle:S}=cn[j]||{},{formatMessage:F}=(0,_.Z)(),$=z=>{E({type:"GO_TO",to:z})};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(Y.F,{label:h,selectedSlide:0,hint:a,previousLabel:"",nextLabel:"",onNext:()=>{},onPrevious:()=>{},secondaryLabel:s?.name||"logo.png",actions:(0,n.jsxs)(it.b,{children:[(0,n.jsx)(at.h,{disabled:!o,onClick:()=>$(s?"pending":"upload"),label:F({id:"Settings.application.customization.carousel.change-action",defaultMessage:"Change logo"}),icon:(0,n.jsx)(Xt.Z,{})}),s&&(0,n.jsx)(at.h,{disabled:!o,onClick:A,label:F({id:"Settings.application.customization.carousel.reset-action",defaultMessage:"Reset logo"}),icon:(0,n.jsx)(Yt.Z,{})})]}),children:(0,n.jsx)(mt.q,{label:F({id:"Settings.application.customization.carousel-slide.label",defaultMessage:"Logo slide"}),children:(0,n.jsx)(u.x,{maxHeight:"40%",maxWidth:"40%",as:"img",src:s?.url||r,alt:F({id:"Settings.application.customization.carousel.title",defaultMessage:"Logo"})})})}),(0,n.jsx)(Mt,{Component:m,currentStep:j,onChangeLogo:C,customLogo:s,goTo:$,next:U,prev:f,modalTitle:S})]})};ut.defaultProps={canUpdate:!1,customLogo:null,hint:null},ut.propTypes={canUpdate:e.bool,customLogo:e.shape({url:e.string,name:e.string}),label:e.string.isRequired,hint:e.string,defaultLogo:e.string.isRequired,onChangeLogo:e.func.isRequired,onResetLogo:e.func.isRequired};const gn=(o,s)=>wt(o,{menuLogo:{display:s.menuLogo},authLogo:{display:s.authLogo}}),Dt={menuLogo:{display:null,submit:{rawFile:null,isReset:!1}},authLogo:{display:null,submit:{rawFile:null,isReset:!1}}},un=(o=Dt,s)=>(0,xt.ZP)(o,r=>{switch(s.type){case"SET_CUSTOM_MENU_LOGO":{r.menuLogo.display=s.value,r.menuLogo.submit.rawFile=s.value.rawFile;break}case"SET_CUSTOM_AUTH_LOGO":{r.authLogo.display=s.value,r.authLogo.submit.rawFile=s.value.rawFile;break}case"RESET_CUSTOM_MENU_LOGO":{r.menuLogo.display=null,r.menuLogo.submit={rawFile:null,isReset:!0};break}case"RESET_CUSTOM_AUTH_LOGO":{r.authLogo.display=null,r.authLogo.submit={rawFile:null,isReset:!0};break}default:return r}}),Lt=(0,i.forwardRef)(({canUpdate:o,projectSettingsStored:s},r)=>{const{formatMessage:a}=(0,_.Z)(),{trackUsage:h}=(0,I.rS)(),{logos:{menu:C,auth:A}}=(0,J.u)(),[{menuLogo:j,authLogo:E},m]=(0,i.useReducer)(un,Dt,()=>gn(Dt,s)),U=$=>{m({type:"SET_CUSTOM_MENU_LOGO",value:$})},f=()=>{h("didClickResetLogo",{logo:"menu"}),m({type:"RESET_CUSTOM_MENU_LOGO"})},S=$=>{m({type:"SET_CUSTOM_AUTH_LOGO",value:$})},F=()=>{h("didClickResetLogo",{logo:"auth"}),m({type:"RESET_CUSTOM_AUTH_LOGO"})};return(0,i.useImperativeHandle)(r,()=>({getValues:()=>({menuLogo:j.submit,authLogo:E.submit})})),(0,n.jsxs)(u.x,{hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7,children:[(0,n.jsx)(l.Z,{variant:"delta",as:"h3",children:a({id:"Settings.application.customization",defaultMessage:"Customization"})}),(0,n.jsx)(l.Z,{variant:"pi",textColor:"neutral600",children:a({id:"Settings.application.customization.size-details",defaultMessage:"Max dimension: {dimension}\xD7{dimension}, Max file size: {size}KB"},{dimension:q,size:lt})}),(0,n.jsxs)(b.r,{paddingTop:4,gap:4,children:[(0,n.jsx)(H.P,{col:6,s:12,children:(0,n.jsx)(ut,{canUpdate:o,customLogo:j.display,defaultLogo:C.default,hint:a({id:"Settings.application.customization.menu-logo.carousel-hint",defaultMessage:"Replace the logo in the main navigation"}),label:a({id:"Settings.application.customization.carousel.menu-logo.title",defaultMessage:"Menu logo"}),onChangeLogo:U,onResetLogo:f})}),(0,n.jsx)(H.P,{col:6,s:12,children:(0,n.jsx)(ut,{canUpdate:o,customLogo:E.display,defaultLogo:A.default,hint:a({id:"Settings.application.customization.auth-logo.carousel-hint",defaultMessage:"Replace the logo in the authentication pages"}),label:a({id:"Settings.application.customization.carousel.auth-logo.title",defaultMessage:"Auth logo"}),onChangeLogo:S,onResetLogo:F})})]})]})});Lt.defaultProps={canUpdate:!1,projectSettingsStored:null},Lt.propTypes={canUpdate:e.bool,projectSettingsStored:e.shape({menuLogo:e.shape({url:e.string,name:e.string})})};const mn=o=>{const s=new FormData;return Object.entries(o).forEach(([r,a])=>{a&&a.rawFile instanceof File&&s.append(r,a.rawFile),a&&a.isReset&&s.append(r,null)}),s},pn=()=>null,hn=()=>{const o=i.useRef(),s=(0,I.lm)(),{trackUsage:r}=(0,I.rS)(),{formatMessage:a}=(0,_.Z)(),{get:h,post:C}=(0,I.kY)(),{updateProjectSettings:A}=(0,J.u)(),j=(0,jt.v9)(yt.s),{formatAPIError:E}=(0,I.So)(),{communityEdition:m,latestStrapiReleaseTag:U,nodeVersion:f,shouldUpdateStrapi:S,strapiVersion:F}=(0,I.L7)(),$=(0,J.p)(pn,async()=>(await t.e(4060).then(t.bind(t,64060))).AdminSeatInfoEE),{allowedActions:{canRead:z,canUpdate:G}}=(0,I.ss)(j.settings["project-settings"]);(0,I.go)();const{data:tt,isLoading:nt}=(0,At.useQuery)(["project-settings"],async()=>{const{data:B}=await h("/admin/project-settings");return B},{cacheTime:0,enabled:z,select(B){return{...B,authLogo:B.authLogo?{...B.authLogo,url:(0,I.CR)(B.authLogo.url)}:B.authLogo,menuLogo:B.menuLogo?{...B.menuLogo,url:(0,I.CR)(B.menuLogo.url)}:B.menuLogo}}}),dt=(0,At.useMutation)(B=>C("/admin/project-settings",B,{headers:{"Content-Type":"multipart/form-data"}}),{onError(B){s({type:"warning",message:E(B)})},async onSuccess(B){const{menuLogo:st,authLogo:w}=B;A({menuLogo:st?.url,authLogo:w?.url}),st?.rawFile&&r("didChangeLogo",{logo:"menu"}),w?.rawFile&&r("didChangeLogo",{logo:"auth"}),s({type:"success",message:a({id:"app",defaultMessage:"Saved"})})}}),ct=B=>{B.preventDefault(),dt.mutate(mn(o.current.getValues()))};return $?(0,n.jsxs)(gt.A,{children:[(0,n.jsx)(I.SL,{name:"Application"}),(0,n.jsx)(pt.o,{children:nt?(0,n.jsx)(ht.a,{children:a({id:"Settings.application.isLoading",defaultMessage:"Loading"})}):(0,n.jsxs)("form",{onSubmit:ct,children:[(0,n.jsx)(Et.T,{title:a({id:"Settings.application.title",defaultMessage:"Overview"}),subtitle:a({id:"Settings.application.description",defaultMessage:"Administration panel\u2019s global information"}),primaryAction:G&&(0,n.jsx)(v.z,{type:"submit",startIcon:(0,n.jsx)(bt.Z,{}),children:a({id:"global.save",defaultMessage:"Save"})})}),(0,n.jsx)(V.D,{children:(0,n.jsxs)(O.k,{direction:"column",alignItems:"stretch",gap:6,children:[(0,n.jsxs)(O.k,{direction:"column",alignItems:"stretch",gap:4,hasRadius:!0,background:"neutral0",shadow:"tableShadow",paddingTop:6,paddingBottom:6,paddingRight:7,paddingLeft:7,children:[(0,n.jsx)(l.Z,{variant:"delta",as:"h3",children:a({id:"global.details",defaultMessage:"Details"})}),(0,n.jsxs)(b.r,{gap:5,as:"dl",children:[(0,n.jsxs)(H.P,{col:6,s:12,children:[(0,n.jsx)(l.Z,{variant:"sigma",textColor:"neutral600",as:"dt",children:a({id:"Settings.application.strapiVersion",defaultMessage:"strapi version"})}),(0,n.jsxs)(O.k,{gap:3,direction:"column",alignItems:"start",as:"dd",children:[(0,n.jsxs)(l.Z,{children:["v",F]}),S&&(0,n.jsx)(Ct.r,{href:`https://github.com/strapi/strapi/releases/tag/${U}`,isExternal:!0,endIcon:(0,n.jsx)(Rt.Z,{}),children:a({id:"Settings.application.link-upgrade",defaultMessage:"Upgrade your admin panel"})})]})]}),(0,n.jsxs)(H.P,{col:6,s:12,children:[(0,n.jsx)(l.Z,{variant:"sigma",textColor:"neutral600",as:"dt",children:a({id:"Settings.application.edition-title",defaultMessage:"current plan"})}),(0,n.jsxs)(O.k,{gap:3,direction:"column",alignItems:"start",as:"dd",children:[(0,n.jsx)(l.Z,{children:a({id:"Settings.application.ee-or-ce",defaultMessage:"{communityEdition, select, true {Community Edition} other {Enterprise Edition}}"},{communityEdition:m})}),(0,n.jsx)(Ct.r,{href:"https://strapi.io/pricing-self-hosted",isExternal:!0,endIcon:(0,n.jsx)(Rt.Z,{}),children:a({id:"Settings.application.link-pricing",defaultMessage:"See all pricing plans"})})]})]}),(0,n.jsxs)(H.P,{col:6,s:12,children:[(0,n.jsx)(l.Z,{variant:"sigma",textColor:"neutral600",as:"dt",children:a({id:"Settings.application.node-version",defaultMessage:"node version"})}),(0,n.jsx)(l.Z,{as:"dd",children:f})]}),(0,n.jsx)($,{})]})]}),z&&tt&&(0,n.jsx)(Lt,{canUpdate:G,ref:o,projectSettingsStored:tt})]})})]})})]}):null};function En(o){return o.filter((s,r,a)=>a.findIndex(h=>h.key===s.key)===r)}function xn(){const{settingId:o}=(0,rt.UO)(),{settings:s}=(0,I.j1)(),{formatMessage:r}=(0,_.Z)(),{isLoading:a,menu:h}=qt(),C=(0,J.p)(nn,async()=>(await t.e(604).then(t.bind(t,90604))).ROUTES_EE,{combine(E,m){return[...E,...m]},defaultValue:[]}),A=i.useMemo(()=>En(C.map(({to:E,Component:m,exact:U})=>(0,J.d)(m,E,U))),[C]),j=Object.values(s).flatMap(E=>{const{links:m}=E;return m.map(U=>(0,J.d)(U.Component,U.to,U.exact||!1))});return a?(0,n.jsx)(I.dO,{}):o?(0,n.jsxs)(gt.A,{sideNav:(0,n.jsx)(Bt,{menu:h}),children:[(0,n.jsx)(Zt.q,{title:r({id:"global.settings",defaultMessage:"Settings"})}),(0,n.jsxs)(rt.rs,{children:[(0,n.jsx)(rt.AW,{path:"/settings/application-infos",component:hn,exact:!0}),A,j]})]}):(0,n.jsx)(rt.l_,{to:"/settings/application-infos"})}},27997:function(y,P,t){"use strict";t.d(P,{A:function(){return l}});var n=t(74081),i=t(72450),c=t(93415);const g=(0,i.ZP)(c.x)`
  display: grid;
  grid-template-columns: ${({hasSideNav:d})=>d?"auto 1fr":"1fr"};
`,p=(0,i.ZP)(c.x)`
  overflow-x: hidden;
`,l=({sideNav:d,children:u})=>(0,n.jsxs)(g,{hasSideNav:Boolean(d),children:[d,(0,n.jsx)(p,{paddingBottom:10,children:u})]})},68412:function(y,P,t){"use strict";t.d(P,{r:function(){return v}});var n=t(74081),i=t(27279),c=t(48157),g=t(47533),p=t(72450),l=t(61657),d=t(32370),u=t(93415);const D=p.ZP.a`
  display: inline-flex;
  align-items: center;
  text-decoration: none;
  pointer-events: ${({disabled:x})=>x?"none":void 0};
  color: ${({disabled:x,theme:M})=>x?M.colors.neutral600:M.colors.primary600};

  svg path {
    transition: fill 150ms ease-out;
    fill: currentColor;
  }

  svg {
    font-size: ${10/16}rem;
  }

  ${d.Z} {
    transition: color 150ms ease-out;
    color: currentColor;
  }

  &:hover {
    color: ${({theme:x})=>x.colors.primary500};
  }

  &:active {
    color: ${({theme:x})=>x.colors.primary700};
  }

  ${l.BF};
`,O=(0,p.ZP)(u.x)`
  display: flex;
`,v=i.forwardRef(({children:x,href:M,to:K,disabled:R=!1,startIcon:L,endIcon:T,...W},Z)=>{const N=M?"_blank":void 0,X=M?"noreferrer noopener":void 0;return(0,n.jsxs)(D,{as:K&&!R?g.OL:"a",target:N,rel:X,to:R?void 0:K,href:R?"#":M,disabled:R,ref:Z,...W,children:[L&&(0,n.jsx)(O,{as:"span","aria-hidden":!0,paddingRight:2,children:L}),(0,n.jsx)(d.Z,{children:x}),T&&!M&&(0,n.jsx)(O,{as:"span","aria-hidden":!0,paddingLeft:2,children:T}),M&&(0,n.jsx)(O,{as:"span","aria-hidden":!0,paddingLeft:2,children:(0,n.jsx)(c.Z,{})})]})})},71877:function(y,P,t){"use strict";t.d(P,{m:function(){return l}});var n=t(74081),i=t(72450),c=t(23298);const g=`${232/16}rem`,p=(0,i.ZP)(c.r)`
  width: ${g};
  background: ${({theme:d})=>d.colors.neutral100};
  position: sticky;
  top: 0;
  height: 100vh;
  overflow-y: auto;
  border-right: 1px solid ${({theme:d})=>d.colors.neutral200};
  z-index: 1;
`,l=({ariaLabel:d,...u})=>(0,n.jsx)(p,{"aria-label":d,as:"nav",...u})},17912:function(y,P,t){"use strict";t.d(P,{p:function(){return L}});var n=t(74081),i=t(27279),c=t(10382),g=t(72450),p=t(89166),l=t(74513);const d=T=>{const W=(0,i.useRef)();return(0,i.useEffect)(()=>{W.current=T}),W.current};var u=t(84366),D=t(93415),O=t(28479),v=t(31624),x=t(10701),M=t(32370),K=t(4987);const R=(0,g.ZP)(u.i)`
  width: ${24/16}rem;
  background-color: ${({theme:T})=>T.colors.neutral200};
`,L=({as:T="h2",label:W,searchLabel:Z="",searchable:N=!1,onChange:X=()=>{},value:k="",onClear:ot=()=>{},onSubmit:Q=()=>{},id:et})=>{const[Y,it]=(0,i.useState)(!1),at=d(Y),mt=(0,l.M)(et),b=(0,i.useRef)(void 0),H=(0,i.useRef)(void 0);(0,i.useEffect)(()=>{Y&&b.current&&b.current.focus(),at&&!Y&&H.current&&H.current.focus()},[Y,at]);const gt=()=>{it(V=>!V)},pt=V=>{ot(V),b.current.focus()},ht=V=>{V.relatedTarget?.id!==mt&&it(!1)},Et=V=>{V.key===p.y.ESCAPE&&it(!1)};return Y?(0,n.jsxs)(D.x,{paddingLeft:4,paddingTop:5,paddingBottom:2,paddingRight:4,children:[(0,n.jsx)(O.U,{children:(0,n.jsx)(v.w,{name:"searchbar",value:k,onChange:X,placeholder:"e.g: strapi-plugin-abcd",onKeyDown:Et,ref:b,onBlur:ht,onClear:pt,onSubmit:Q,clearLabel:"Clear",size:"S",children:Z})}),(0,n.jsx)(D.x,{paddingLeft:2,paddingTop:4,children:(0,n.jsx)(R,{})})]}):(0,n.jsxs)(D.x,{paddingLeft:6,paddingTop:6,paddingBottom:2,paddingRight:4,children:[(0,n.jsxs)(x.k,{justifyContent:"space-between",alignItems:"flex-start",children:[(0,n.jsx)(M.Z,{variant:"beta",as:T,children:W}),N&&(0,n.jsx)(K.h,{ref:H,onClick:gt,label:Z,icon:(0,n.jsx)(c.Z,{})})]}),(0,n.jsx)(D.x,{paddingTop:4,children:(0,n.jsx)(R,{})})]})}},49370:function(y,P,t){"use strict";t.d(P,{E:function(){return x}});var n=t(74081),i=t(27279),c=t(79830),g=t(72450),p=t(93415),l=t(32370),d=t(10701),u=t(30413);const D=(0,g.ZP)(p.x)`
  display: flex;
  align-items: center;
  justify-content: space-between;
  text-decoration: none;
  color: ${({theme:M})=>M.colors.neutral800};
  svg > * {
    fill: ${({theme:M})=>M.colors.neutral600};
  }

  &.active {
    ${({theme:M})=>`
      background-color: ${M.colors.primary100};
      border-right: 2px solid ${M.colors.primary600};
      svg > * {
        fill: ${M.colors.primary700};
      }
      ${l.Z} {
        color: ${M.colors.primary700};
        font-weight: 500;
      }
      `}
  }

  &:focus-visible {
    outline-offset: -2px;
  }
`,O=(0,g.ZP)(c.Z)`
  width: ${12/16}rem;
  height: ${4/16}rem;
  * {
    fill: ${({theme:M,$active:K})=>K?M.colors.primary600:M.colors.neutral600};
  }
`,v=g.ZP.div`
  svg {
    height: ${12/16}rem;
    width: ${12/16}rem;
  }
`,x=i.forwardRef(({children:M,icon:K=null,withBullet:R=!1,as:L=u.f,isSubSectionChild:T=!1,...W},Z)=>(0,n.jsxs)(D,{as:L,icon:K,background:"neutral100",paddingLeft:T?9:7,paddingBottom:2,paddingTop:2,ref:Z,...W,children:[(0,n.jsxs)(d.k,{children:[K?(0,n.jsx)(v,{children:K}):(0,n.jsx)(O,{}),(0,n.jsx)(p.x,{paddingLeft:2,children:(0,n.jsx)(l.Z,{as:"span",children:M})})]}),R&&(0,n.jsx)(p.x,{as:d.k,paddingRight:4,children:(0,n.jsx)(O,{$active:!0})})]}))},20534:function(y,P,t){"use strict";t.d(P,{D:function(){return K}});var n=t(74081),i=t(27279),c=t(72450),g=t(10411),p=t(10701),l=t(93415),d=t(32370);const u=(0,c.ZP)(p.k)`
  border: none;
  padding: 0;
  background: transparent;
`,D=c.ZP.div`
  display: flex;
  align-items: center;
  transform: rotateX(${({rotated:R})=>R?"0deg":"180deg"});
`,O=({collapsable:R=!1,label:L,onClick:T=()=>{},ariaExpanded:W,ariaControls:Z})=>R?(0,n.jsxs)(u,{as:"button",onClick:T,"aria-expanded":W,"aria-controls":Z,textAlign:"left",children:[(0,n.jsx)(l.x,{paddingRight:1,children:(0,n.jsx)(d.Z,{variant:"sigma",textColor:"neutral600",children:L})}),R&&(0,n.jsx)(D,{rotated:W,children:(0,n.jsx)(g.Z,{"aria-hidden":!0})})]}):(0,n.jsx)(u,{children:(0,n.jsx)(l.x,{paddingRight:1,children:(0,n.jsx)(d.Z,{variant:"sigma",textColor:"neutral600",children:L})})});var v=t(74513),x=t(4963);const M=(0,c.ZP)(l.x)`
  svg {
    height: ${4/16}rem;
    path {
      fill: ${({theme:R})=>R.colors.neutral500};
    }
  }
`,K=({collapsable:R=!1,label:L,badgeLabel:T,children:W,id:Z})=>{const[N,X]=(0,i.useState)(!0),k=(0,v.M)(Z),ot=()=>{X(Q=>!Q)};return(0,n.jsxs)(p.k,{direction:"column",alignItems:"stretch",gap:1,children:[(0,n.jsx)(M,{paddingLeft:6,paddingTop:2,paddingBottom:2,paddingRight:4,children:(0,n.jsxs)(l.x,{position:"relative",paddingRight:T?6:0,children:[(0,n.jsx)(O,{onClick:ot,ariaExpanded:N,ariaControls:k,collapsable:R,label:L}),T&&(0,n.jsx)(x.C,{backgroundColor:"neutral150",textColor:"neutral600",position:"absolute",right:0,top:"50%",transform:"translateY(-50%)",children:T})]})}),(!R||N)&&(0,n.jsx)("ol",{id:k,children:i.Children.map(W,(Q,et)=>(0,n.jsx)("li",{children:Q},et))})]})}},96220:function(y,P,t){"use strict";t.d(P,{Z:function(){return p}});var n=t(74081),i=t(27279),c=t(93415),g=t(10701);const p=({children:l,spacing:d=2,horizontal:u=!1,...D})=>(0,n.jsx)(c.x,{paddingTop:2,paddingBottom:4,children:(0,n.jsx)(g.k,{as:"ol",gap:d,direction:u?"row":"column",alignItems:u?"center":"stretch",...D,children:i.Children.map(l,(O,v)=>(0,n.jsx)("li",{children:O},v))})})},79830:function(y,P,t){"use strict";t.d(P,{Z:function(){return c}});var n=t(74081);const i=g=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 4 4",...g,children:(0,n.jsx)("rect",{width:4,height:4,fill:"#A5A5BA",rx:2})}),c=i},91561:function(y,P,t){"use strict";t.d(P,{Z:function(){return c}});var n=t(74081);const i=g=>(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1rem",height:"1rem",fill:"none",viewBox:"0 0 24 24",...g,children:(0,n.jsx)("path",{fill:"#8E8EA9",d:"M19 10h1a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H4a1 1 0 0 1-1-1V11a1 1 0 0 1 1-1h1V9a7 7 0 0 1 14 0v1Zm-2 0V9A5 5 0 0 0 7 9v1h10Zm-6 4v4h2v-4h-2Z"})}),c=i}}]);
