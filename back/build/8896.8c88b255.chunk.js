"use strict";(self.webpackChunkmoodly=self.webpackChunkmoodly||[]).push([[8896],{55535:function(V,A,t){t.d(A,{B:function(){return w},D:function(){return L},H:function(){return se},R:function(){return k}});var l=t(74081),M=t(10701),s=t(32370),P=t(27997),m=t(73354),p=t(74758),_=t(27875),E=t(87006),D=t(10411),v=t(76827),T=t(61020),j=t(76368),O=t(47706),I=t(70627),g=t(72450);const H=(0,g.ZP)(M.k)`
  svg path {
    fill: ${({theme:R})=>R.colors.neutral600};
  }
`;function x({name:R}){return(0,l.jsxs)(M.k,{background:"primary100",borderStyle:"dashed",borderColor:"primary600",borderWidth:"1px",gap:3,hasRadius:!0,padding:3,shadow:"tableShadow",width:(0,E.Q1)(300),children:[(0,l.jsx)(H,{alignItems:"center",background:"neutral200",borderRadius:"50%",height:6,justifyContent:"center",width:6,children:(0,l.jsx)(D.Z,{width:`${8/16}rem`})}),(0,l.jsx)(s.Z,{fontWeight:"bold",children:R})]})}x.propTypes={name:I.string.isRequired};function h({type:R,item:N}){switch(R){case O.D.STAGE:return(0,l.jsx)(x,{...N});default:return null}}function L(){return(0,l.jsx)(j.D,{renderItem:h})}function k({children:R}){return(0,l.jsx)(P.A,{children:(0,l.jsx)(m.o,{tabIndex:-1,children:(0,l.jsx)(p.D,{children:R})})})}function w({href:R}){const{formatMessage:N}=(0,T.Z)();return(0,l.jsx)(E.rU,{startIcon:(0,l.jsx)(v.Z,{}),to:R,children:N({id:"global.back",defaultMessage:"Back"})})}function se({title:R,subtitle:N,navigationAction:ne,primaryAction:Q}){return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(E.SL,{name:R}),(0,l.jsx)(_.T,{navigationAction:ne,primaryAction:Q,title:R,subtitle:N})]})}},11745:function(V,A,t){t.d(A,{a:function(){return P},g:function(){return s}});var l=t(97003),M=t(47706);function s(m){if(!m)return null;const _=Object.entries(l.W.colors).filter(([,E])=>E.toUpperCase()===m.toUpperCase()).reduce((E,[D])=>(M.S?.[D]&&(E=D),E),null);return _?{themeColorName:_,name:M.S[_]}:null}function P(){return Object.entries(M.S).map(([m,p])=>({hex:l.W.colors[m].toUpperCase(),name:p}))}},73314:function(V,A,t){t.d(A,{u:function(){return m}});var l=t(27279),M=t(87006),s=t(61020),P=t(40464);const m=(p={},_={})=>{const{id:E="",...D}=p,{get:v}=(0,M.kY)(),{locale:T}=(0,s.Z)(),j=(0,M.Xe)(T,{sensitivity:"base"}),{data:O,error:I,isError:g,isLoading:H,refetch:x}=(0,P.useQuery)(["roles",E,D],async()=>{const{data:L}=await v(`/admin/roles/${E??""}`,{params:D});return L},_);return{roles:l.useMemo(()=>{let L=[];return O&&(Array.isArray(O.data)?L=O.data:L=[O.data]),[...L].sort((k,w)=>j.compare(k.name,w.name))},[O,j]),error:I,isError:g,isLoading:H,refetch:x}}},59491:function(V,A,t){t.d(A,{u:function(){return m}});var l=t(27279),M=t(87006),s=t(53532),P=t(40464);function m(){const{get:p}=(0,M.kY)(),{formatAPIError:_}=(0,M.So)(),E=(0,M.lm)(),D=(0,P.useQueries)([{queryKey:["content-manager","components"],async queryFn(){const{data:{data:g}}=await p("/content-manager/components");return g},onError(g){g instanceof s.d7&&E({type:"warning",message:_(g)})}},{queryKey:["content-manager","content-types"],async queryFn(){const{data:{data:g}}=await p("/content-manager/content-types");return g},onError(g){g instanceof s.d7&&E({type:"warning",message:_(g)})}}]),[v,T]=D,j=v.isLoading||T.isLoading,O=l.useMemo(()=>(T?.data??[]).filter(g=>g.kind==="collectionType"&&g.isDisplayed),[T?.data]),I=l.useMemo(()=>(T?.data??[]).filter(g=>g.kind!=="collectionType"&&g.isDisplayed),[T?.data]);return{isLoading:j,components:l.useMemo(()=>v?.data??[],[v?.data]),collectionTypes:O,singleTypes:I}}},88181:function(V,A,t){t.d(A,{u:function(){return P}});var l=t(27279),M=t(87006),s=t(40464);function P(m={}){const{get:p}=(0,M.kY)(),{id:_="",...E}=m,D={populate:"stages"},{data:v,isLoading:T,status:j,refetch:O}=(0,s.useQuery)(["review-workflows","workflows",_],async()=>(await p(`/admin/review-workflows/workflows/${_}`,{params:{...D,...E}})).data),I=l.useMemo(()=>_&&v?.data?[v.data]:Array.isArray(v?.data)?v.data:[],[v?.data,_]);return{meta:l.useMemo(()=>v?.meta??{},[v?.meta]),workflows:I,isLoading:T,status:j,refetch:O}}},97390:function(V,A,t){t.d(A,{S:function(){return ie},W:function(){return le},a:function(){return ze},b:function(){return ve},c:function(){return Me},d:function(){return Le},e:function(){return Ue},f:function(){return Ke},g:function(){return $e},h:function(){return fe},i:function(){return Ne},j:function(){return Qe},k:function(){return Ve},l:function(){return Ae},r:function(){return be},s:function(){return Xe},u:function(){return We},v:function(){return rt}});var l=t(27279),M=t(30594),s=t(74081),P=t(93415),m=t(32370),p=t(10701),_=t(97232),E=t(4987),D=t(10989),v=t(45322),T=t(24920),j=t(34642),O=t(23298),I=t(74577),g=t(12881),H=t(63738),x=t(87006),h=t(70627),L=t(61020),k=t(59461),w=t(72450),se=t(77225),R=t(75438),N=t(33039),ne=t(78031),Q=t(69933),Y=t(61846),X=t(71563),Se=t(92241),pe=t(55377),Ce=t(61815),Dt=t(8175),Ot=t(98934),Te=t(43433),wt=t(74919),Rt=t(92249),St=t(87830),Ct=t(3243),Tt=t(29206),d=t(47706),ae=t(11745),U=t(57150),Ie=t(6078),W=t(47853);function We(e,a){const r=(0,M.V)();(0,l.useEffect)(()=>{r.injectReducer(e,a)},[r,e,a])}function xe(e){return{type:d.j,payload:{id:e}}}function Ae({workflow:e}){return{type:d.A,payload:e}}function Le({workflows:e}){return{type:d.c,payload:e}}function ke(e){return{type:d.k,payload:{stageId:e}}}function fe(e={}){return{type:d.d,payload:e}}function oe(e,a){return{type:d.l,payload:{stageId:e,...a}}}function je(e){return{type:d.m,payload:e}}function Be(e,a){return{type:d.n,payload:{newIndex:a,oldIndex:e}}}function me(e){return{type:d.i,payload:e}}function be(){return{type:d.e}}function Ue(e){return{type:d.f,payload:e}}function Ke(e){return{type:d.g,payload:e}}function $e(e){return{type:d.h,payload:e}}const re=(0,w.ZP)(se.Z)`
  > circle {
    fill: ${({theme:e})=>e.colors.neutral150};
  }
  > path {
    fill: ${({theme:e})=>e.colors.neutral600};
  }
`,Ze=(0,w.ZP)(P.x)`
  border-radius: 26px;

  svg {
    height: ${({theme:e})=>e.spaces[6]};
    width: ${({theme:e})=>e.spaces[6]};

    > path {
      fill: ${({theme:e})=>e.colors.neutral600};
    }
  }

  &:hover {
    color: ${({theme:e})=>e.colors.primary600} !important;
    ${m.Z} {
      color: ${({theme:e})=>e.colors.primary600} !important;
    }

    ${re} {
      > circle {
        fill: ${({theme:e})=>e.colors.primary600};
      }
      > path {
        fill: ${({theme:e})=>e.colors.neutral100};
      }
    }
  }

  &:active {
    ${m.Z} {
      color: ${({theme:e})=>e.colors.primary600};
    }

    ${re} {
      > circle {
        fill: ${({theme:e})=>e.colors.primary600};
      }
      > path {
        fill: ${({theme:e})=>e.colors.neutral100};
      }
    }
  }
`;function Ee({children:e,...a}){return(0,s.jsx)(Ze,{as:"button",background:"neutral0",border:"neutral150",paddingBottom:3,paddingLeft:4,paddingRight:4,paddingTop:3,shadow:"filterShadow",...a,children:(0,s.jsxs)(p.k,{gap:2,children:[(0,s.jsx)(re,{"aria-hidden":!0}),(0,s.jsx)(m.Z,{variant:"pi",fontWeight:"bold",textColor:"neutral500",children:e})]})})}Ee.propTypes={children:h.node.isRequired};const G={serverState:{contentTypes:{collectionTypes:[],singleTypes:[]},roles:[],workflow:null,workflows:[]},clientState:{currentWorkflow:{data:{name:"",contentTypes:[],stages:[],permissions:void 0}},isLoading:!0}};function Ne(e=G,a){return(0,Ce.Uy)(e,r=>{const{payload:u}=a;switch(a.type){case d.f:{r.serverState.contentTypes=u;break}case d.h:{r.clientState.isLoading=u;break}case d.g:{r.serverState.roles=u;break}case d.A:{const i=u;i&&(r.serverState.workflow=i,r.clientState.currentWorkflow.data={...i,stages:i.stages.map(c=>({...c,color:c?.color??d.b}))});break}case d.c:{r.serverState.workflows=u;break}case d.e:{r.clientState=G.clientState,r.serverState=G.serverState;break}case d.k:{const{stageId:i}=u,{currentWorkflow:c}=e.clientState;r.clientState.currentWorkflow.data.stages=c.data.stages.filter(f=>(f?.id??f.__temp_key__)!==i);break}case d.d:{const{currentWorkflow:i}=e.clientState;i.data||(r.clientState.currentWorkflow.data={stages:[]});const c=he(r.clientState.currentWorkflow.data.stages);r.clientState.currentWorkflow.data.stages.push({...u,color:u?.color??d.b,__temp_key__:c});break}case d.j:{const{currentWorkflow:i}=e.clientState,{id:c}=u,f=i.data.stages.findIndex(S=>(S?.id??S?.__temp_key__)===c),y=i.data.stages[f];r.clientState.currentWorkflow.data.stages.splice(f+1,0,{...y,id:void 0,__temp_key__:he(r.clientState.currentWorkflow.data.stages)});break}case d.l:{const{currentWorkflow:i}=e.clientState,{stageId:c,...f}=u;r.clientState.currentWorkflow.data.stages=i.data.stages.map(y=>(y.id??y.__temp_key__)===c?{...y,...f}:y);break}case d.m:{const{currentWorkflow:i}=e.clientState;r.clientState.currentWorkflow.data.stages=i.data.stages.map(c=>({...c,...u}));break}case d.n:{const{currentWorkflow:{data:{stages:i}}}=e.clientState,{newIndex:c,oldIndex:f}=u;if(c>=0&&c<i.length){const y=i[f];let S=[...i];S.splice(f,1),S.splice(c,0,y),r.clientState.currentWorkflow.data.stages=S}break}case d.i:{r.clientState.currentWorkflow.data={...r.clientState.currentWorkflow.data,...u};break}}})}const he=(e=[])=>{const a=e.map(r=>r.id??r.__temp_key__);return Math.max(...a,-1)+1},K=e=>e[d.R]??G,He=(0,U.P1)(K,({serverState:{contentTypes:e}})=>e),Me=(0,U.P1)(K,({serverState:{roles:e}})=>e),ve=(0,U.P1)(K,({clientState:{currentWorkflow:e}})=>e.data),Fe=(0,U.P1)(K,({serverState:{workflows:e}})=>e),ze=(0,U.P1)(K,({serverState:e,clientState:{currentWorkflow:a}})=>!Ie(e.workflow,a.data)),Ve=(0,U.P1)(K,({serverState:e,clientState:{currentWorkflow:a}})=>!(e.workflow?.stages??[]).every(r=>!!a.data.stages.find(({id:u})=>u===r.id))),Xe=(0,U.P1)(K,({clientState:{isLoading:e}})=>e),Qe=(0,U.P1)(K,({serverState:e})=>e),Ye=(0,w.ZP)(_.ML)`
  padding-left: ${({theme:e})=>e.spaces[7]};
`,Ge=(0,w.ZP)(p.k)`
  > * {
    flex-grow: 1;
  }
`,Je=(0,w.ZP)(Q.sN)`
  color: ${({theme:e})=>e.colors.danger600};
`,qe=(0,w.ZP)(Y.xz)`
  :hover,
  :focus {
    background-color: ${({theme:e})=>e.colors.neutral100};
  }

  > span {
    font-size: 0;
  }
`,et=(0,w.ZP)(E.h)`
  align-items: center;
  border-radius: ${({theme:e})=>e.borderRadius};
  display: flex;
  justify-content: center;

  :hover,
  :focus {
    background-color: ${({theme:e})=>e.colors.neutral100};
  }

  svg {
    height: auto;
    width: ${({theme:e})=>e.spaces[3]}};
  }
`,tt=(0,ae.a)();function st(){return(0,s.jsx)(P.x,{background:"primary100",borderStyle:"dashed",borderColor:"primary600",borderWidth:"1px",display:"block",hasRadius:!0,padding:6,shadow:"tableShadow"})}function Pe({id:e,index:a,canDelete:r,canReorder:u,canUpdate:i,isOpen:c=!1,stagesCount:f}){const y=o=>`${o+1} of ${f}`,S=o=>{F(n({id:"dnd.grab-item",defaultMessage:"{item}, grabbed. Current position in list: {position}. Press up and down arrow to change position, Spacebar to drop, Escape to cancel."},{item:Z.value,position:y(o)}))},de=o=>{F(n({id:"dnd.drop-item",defaultMessage:"{item}, dropped. Final position in list: {position}."},{item:Z.value,position:y(o)}))},ce=()=>{F(n({id:"dnd.cancel-item",defaultMessage:"{item}, dropped. Re-order cancelled."},{item:Z.value}))},J=(o,C)=>{F(n({id:"dnd.reorder",defaultMessage:"{item}, moved. New position in list: {position}."},{item:Z.value,position:y(o)})),b(Be(C,o))},ue=()=>{ge(!0)},[q,F]=l.useState(null),{formatMessage:n}=(0,L.Z)(),{trackUsage:B}=(0,x.rS)(),b=(0,k.I0)(),$=(0,x.lm)(),[_e,it]=l.useState(c),[lt,ge]=l.useState(!1),[Z,ye,dt]=(0,X.U$)(`stages.${a}.name`),[ee,De,ct]=(0,X.U$)(`stages.${a}.color`),[z,Oe,ut]=(0,X.U$)(`stages.${a}.permissions`),_t=(0,k.v9)(Me),[{handlerId:gt,isDragging:pt,handleKeyDown:ft},mt,Et,ht,we]=(0,pe.u)(u,{index:a,item:{name:Z.value},onGrabItem:S,onDropItem:de,onMoveItem:J,onCancel:ce,type:d.D.STAGE}),Mt=(0,pe.c)(mt,Et),vt=tt.map(({hex:o,name:C})=>({value:o,label:n({id:"Settings.review-workflows.stage.color.name",defaultMessage:"{name}"},{name:C}),color:o})),{themeColorName:Pt}=(0,ae.g)(ee.value)??{},Re=_t.filter(o=>o.code!=="strapi-super-admin");return l.useEffect(()=>{we((0,Se.rX)(),{captureDraggingState:!1})},[we,a]),(0,s.jsxs)(P.x,{ref:Mt,children:[q&&(0,s.jsx)(D.T,{"aria-live":"assertive",children:q}),pt?(0,s.jsx)(st,{}):(0,s.jsxs)(v.U,{size:"S",variant:"primary",onToggle:()=>{it(!_e),_e||B("willEditStage")},expanded:_e,shadow:"tableShadow",error:ye.error??De?.error??Oe?.error??!1,hasErrorMessage:!1,children:[(0,s.jsx)(T.B,{title:Z.value,togglePosition:"left",action:(r||i)&&(0,s.jsxs)(p.k,{children:[(0,s.jsxs)(Y.fC,{children:[(0,s.jsxs)(qe,{size:"S",endIcon:null,paddingLeft:2,paddingRight:2,children:[(0,s.jsx)(R.Z,{"aria-hidden":!0,focusable:!1}),(0,s.jsx)(D.T,{as:"span",children:n({id:"[tbdb].components.DynamicZone.more-actions",defaultMessage:"More actions"})})]}),(0,s.jsx)(Y.VY,{popoverPlacement:"bottom-end",zIndex:2,children:(0,s.jsxs)(Y.rl,{children:[i&&(0,s.jsx)(Q.sN,{onClick:()=>b(xe(e)),children:n({id:"Settings.review-workflows.stage.delete",defaultMessage:"Duplicate stage"})}),r&&(0,s.jsx)(Je,{onClick:()=>b(ke(e)),children:n({id:"Settings.review-workflows.stage.delete",defaultMessage:"Delete"})})]})})]}),i&&(0,s.jsx)(et,{background:"transparent",forwardedAs:"div",hasRadius:!0,role:"button",noBorder:!0,tabIndex:0,"data-handler-id":gt,ref:ht,label:n({id:"Settings.review-workflows.stage.drag",defaultMessage:"Drag"}),onClick:o=>o.stopPropagation(),onKeyDown:ft,children:(0,s.jsx)(N.Z,{})})]})}),(0,s.jsx)(j.v,{padding:6,background:"neutral0",hasRadius:!0,children:(0,s.jsxs)(O.r,{gap:4,children:[(0,s.jsx)(I.P,{col:6,children:(0,s.jsx)(g.o,{...Z,id:Z.name,disabled:!i,label:n({id:"Settings.review-workflows.stage.name.label",defaultMessage:"Stage name"}),error:ye.error??!1,onChange:o=>{dt.setValue(o.target.value),b(oe(e,{name:o.target.value}))},required:!0})}),(0,s.jsx)(I.P,{col:6,children:(0,s.jsx)(H.q4,{disabled:!i,error:De?.error??!1,id:ee.name,required:!0,label:n({id:"content-manager.reviewWorkflows.stage.color",defaultMessage:"Color"}),onChange:o=>{ct.setValue(o),b(oe(e,{color:o}))},value:ee.value.toUpperCase(),startIcon:(0,s.jsx)(p.k,{as:"span",height:2,background:ee.value,borderColor:Pt==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2}),children:vt.map(({value:o,label:C,color:te})=>{const{themeColorName:yt}=(0,ae.g)(te);return(0,s.jsx)(H.ag,{value:o,startIcon:(0,s.jsx)(p.k,{as:"span",height:2,background:te,borderColor:yt==="neutral0"?"neutral150":"transparent",hasRadius:!0,shrink:0,width:2}),children:C},o)})})}),(0,s.jsx)(I.P,{col:6,children:Re.length===0?(0,s.jsx)(x.X0,{description:{id:"Settings.review-workflows.stage.permissions.noPermissions.description",defaultMessage:"You don\u2019t have the permission to see roles"},intlLabel:{id:"Settings.review-workflows.stage.permissions.label",defaultMessage:"Roles that can change this stage"},name:z.name}):(0,s.jsxs)(p.k,{alignItems:"flex-end",gap:3,children:[(0,s.jsx)(Ge,{grow:1,children:(0,s.jsx)(_.NU,{...z,disabled:!i,error:Oe.error??!1,id:z.name,label:n({id:"Settings.review-workflows.stage.permissions.label",defaultMessage:"Roles that can change this stage"}),onChange:o=>{const C=o.map(te=>({role:parseInt(te,10),action:"admin::review-workflows.stage.transition"}));ut.setValue(C),b(oe(e,{permissions:C}))},placeholder:n({id:"Settings.review-workflows.stage.permissions.placeholder",defaultMessage:"Select a role"}),required:!0,value:(z.value??[]).map(o=>`${o.role}`),withTags:!0,children:[{label:n({id:"Settings.review-workflows.stage.permissions.allRoles.label",defaultMessage:"All roles"}),children:Re.map(o=>({value:`${o.id}`,label:o.name}))}].map(o=>"children"in o?(0,s.jsx)(_.Ab,{label:o.label,values:o.children.map(C=>C.value),children:o.children.map(C=>(0,s.jsx)(Ye,{value:C.value,children:C.label},C.value))},o.label):(0,s.jsx)(_.ML,{value:o.value,children:o.label},o.value))})}),(0,s.jsx)(E.h,{disabled:!i,icon:(0,s.jsx)(ne.Z,{}),label:n({id:"Settings.review-workflows.stage.permissions.apply.label",defaultMessage:"Apply to all stages"}),size:"L",variant:"secondary",onClick:()=>ue(z.value)})]})})]})})]}),(0,s.jsx)(x.QH.Root,{iconRightButton:null,isOpen:lt,onToggleDialog:()=>ge(!1),onConfirm:()=>{b(je({permissions:z.value})),ge(!1),$({type:"success",message:n({id:"Settings.review-workflows.page.edit.confirm.stages.permissions.copy.success",defaultMessage:"Applied roles to all other stages of the workflow"})})},variantRightButton:"primary",children:(0,s.jsx)(x.QH.Body,{children:(0,s.jsx)(m.Z,{textAlign:"center",variant:"omega",children:n({id:"Settings.review-workflows.page.edit.confirm.stages.permissions.copy",defaultMessage:"Roles that can change that stage will be applied to all the other stages."})})})})]})}Pe.propTypes=h.shape({id:h.number.isRequired,color:h.string.isRequired,canDelete:h.bool.isRequired,canReorder:h.bool.isRequired,canUpdate:h.bool.isRequired,stagesCount:h.number.isRequired}).isRequired;const nt=(0,w.ZP)(P.x)`
  transform: translateX(-50%);
`;function ie({canDelete:e,canUpdate:a,stages:r}){const{formatMessage:u}=(0,L.Z)(),i=(0,k.I0)(),{trackUsage:c}=(0,x.rS)();return(0,s.jsxs)(p.k,{direction:"column",gap:6,width:"100%",children:[(0,s.jsxs)(P.x,{position:"relative",spacing:4,width:"100%",children:[(0,s.jsx)(nt,{background:"neutral200",height:"100%",left:"50%",position:"absolute",top:"0",width:2,zIndex:1}),(0,s.jsx)(p.k,{direction:"column",alignItems:"stretch",gap:6,zIndex:2,position:"relative",as:"ol",children:r.map((f,y)=>{const S=f?.id??f.__temp_key__;return(0,s.jsx)(P.x,{as:"li",children:(0,s.jsx)(Pe,{id:S,index:y,isOpen:!f.id,canDelete:r.length>1&&e,canReorder:r.length>1,canUpdate:a,stagesCount:r.length})},`stage-${S}`)})})]}),a&&(0,s.jsx)(Ee,{type:"button",onClick:()=>{i(fe({name:""})),c("willCreateStage")},children:u({id:"Settings.review-workflows.stage.add",defaultMessage:"Add new stage"})})]})}ie.defaultProps={canDelete:!0,canUpdate:!0,stages:[]},ie.propTypes={canDelete:h.bool,canUpdate:h.bool,stages:h.arrayOf(h.shape({id:h.number,__temp_key__:h.number,name:h.string.isRequired}))};const at=(0,w.ZP)(_.ML)`
  padding-left: ${({theme:e})=>e.spaces[7]};
`,ot=(0,w.ZP)(m.Z)`
  font-style: italic;
`;function le({canUpdate:e}){const{formatMessage:a,locale:r}=(0,L.Z)(),u=(0,k.I0)(),{collectionTypes:i,singleTypes:c}=(0,k.v9)(He),f=(0,k.v9)(ve),y=(0,k.v9)(Fe),[S,de,ce]=(0,X.U$)("name"),[J,ue,q]=(0,X.U$)("contentTypes"),F=(0,x.Xe)(r,{sensitivity:"base"});return(0,s.jsxs)(O.r,{background:"neutral0",hasRadius:!0,gap:4,padding:6,shadow:"tableShadow",children:[(0,s.jsx)(I.P,{col:6,children:(0,s.jsx)(g.o,{...S,id:S.name,disabled:!e,label:a({id:"Settings.review-workflows.workflow.name.label",defaultMessage:"Workflow Name"}),error:de.error??!1,onChange:n=>{u(me({name:n.target.value})),ce.setValue(n.target.value)},required:!0})}),(0,s.jsx)(I.P,{col:6,children:(0,s.jsx)(_.NU,{...J,customizeContent:n=>a({id:"Settings.review-workflows.workflow.contentTypes.displayValue",defaultMessage:"{count} {count, plural, one {content type} other {content types}} selected"},{count:n.length}),disabled:!e,error:ue.error??!1,id:J.name,label:a({id:"Settings.review-workflows.workflow.contentTypes.label",defaultMessage:"Associated to"}),onChange:n=>{u(me({contentTypes:n})),q.setValue(n)},placeholder:a({id:"Settings.review-workflows.workflow.contentTypes.placeholder",defaultMessage:"Select"}),children:[...i.length>0?[{label:a({id:"Settings.review-workflows.workflow.contentTypes.collectionTypes.label",defaultMessage:"Collection Types"}),children:[...i].sort((n,B)=>F.compare(n.info.displayName,B.info.displayName)).map(n=>({label:n.info.displayName,value:n.uid}))}]:[],...c.length>0?[{label:a({id:"Settings.review-workflows.workflow.contentTypes.singleTypes.label",defaultMessage:"Single Types"}),children:[...c].map(n=>({label:n.info.displayName,value:n.uid}))}]:[]].map(n=>"children"in n?(0,s.jsx)(_.Ab,{label:n.label,values:n.children.map(B=>B.value.toString()),children:n.children.map(B=>{const{name:b}=y.find($=>(f&&$.id!==f.id||!f)&&$.contentTypes.includes(B.value))??{};return(0,s.jsx)(at,{value:B.value,children:a({id:"Settings.review-workflows.workflow.contentTypes.assigned.notice",defaultMessage:"{label} {name, select, undefined {} other {<i>(assigned to <em>{name}</em> workflow)</i>}}"},{label:B.label,name:b,em:(...$)=>(0,s.jsx)(m.Z,{as:"em",fontWeight:"bold",children:$}),i:(...$)=>(0,s.jsx)(ot,{children:$})})},B.value)})},n.label):(0,s.jsx)(_.ML,{value:n.value,children:n.label},n.value))})})]})}le.defaultProps={canUpdate:!0},le.propTypes={canUpdate:h.bool};async function rt({values:e,formatMessage:a}){const r=W.Ry({contentTypes:W.IX().of(W.Z_()),name:W.Z_().max(255,a({id:"Settings.review-workflows.validation.name.max-length",defaultMessage:"Name can not be longer than 255 characters"})).required(),stages:W.IX().of(W.Ry().shape({name:W.Z_().required(a({id:"Settings.review-workflows.validation.stage.name",defaultMessage:"Name is required"})).max(255,a({id:"Settings.review-workflows.validation.stage.max-length",defaultMessage:"Name can not be longer than 255 characters"})).test("unique-name",a({id:"Settings.review-workflows.validation.stage.duplicate",defaultMessage:"Stage name must be unique"}),function(u){const{options:{context:i}}=this;return i.stages.filter(c=>c.name===u).length===1}),color:W.Z_().required(a({id:"Settings.review-workflows.validation.stage.color",defaultMessage:"Color is required"})).matches(/^#(?:[0-9a-fA-F]{3}){1,2}$/i),permissions:W.IX(W.Ry({role:W.Rx().strict().typeError(a({id:"Settings.review-workflows.validation.stage.permissions.role.number",defaultMessage:"Role must be of type number"})).required,action:W.Z_().required({id:"Settings.review-workflows.validation.stage.permissions.action.required",defaultMessage:"Action is a required argument"})})).strict()})).min(1)});try{return await r.validate(e,{abortEarly:!1,context:e}),!0}catch(u){let i={};return u instanceof W.p8&&u.inner.forEach(c=>{Te(i,c.path,c.message)}),i}}}}]);
